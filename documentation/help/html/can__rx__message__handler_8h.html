<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenLcbCLib: src/drivers/canbus/can_rx_message_handler.h File Reference</title>
<link rel="icon" href="Diesel.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">OpenLcbCLib<span id="projectnumber">&#160;1.0 Alpha</span>
   </div>
   <div id="projectbrief">OpenSource C Library to create OpenLcb/Lcc Nodes</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_c718a368270b13c54d94892d20736f45.html">drivers</a></li><li class="navelem"><a class="el" href="dir_858afec057d05dde4e87dd686afd4670.html">canbus</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">can_rx_message_handler.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Message handlers for processing received CAN frames into OpenLCB messages.  
<a href="#details">More...</a></p>

<p><a href="can__rx__message__handler_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structinterface__can__rx__message__handler__t.html">interface_can_rx_message_handler_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dependency-injection interface for the CAN receive message handlers.  <a href="structinterface__can__rx__message__handler__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aaa035b3a9b3535b413f441c4cb6d741f" id="r_aaa035b3a9b3535b413f441c4cb6d741f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaa035b3a9b3535b413f441c4cb6d741f">CanRxMessageHandler_initialize</a> (const <a class="el" href="structinterface__can__rx__message__handler__t.html">interface_can_rx_message_handler_t</a> *interface_can_frame_message_handler)</td></tr>
<tr class="memdesc:aaa035b3a9b3535b413f441c4cb6d741f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers the dependency-injection interface for this module.  <br /></td></tr>
<tr class="separator:aaa035b3a9b3535b413f441c4cb6d741f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd9720395ccc0ac4c72018bb248c62b8" id="r_afd9720395ccc0ac4c72018bb248c62b8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afd9720395ccc0ac4c72018bb248c62b8">CanRxMessageHandler_first_frame</a> (<a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *can_msg, uint8_t offset, <a class="el" href="openlcb__types_8h.html#aececf1be5c268eb2c680b4a0cc778467">payload_type_enum</a> data_type)</td></tr>
<tr class="memdesc:afd9720395ccc0ac4c72018bb248c62b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the first frame of a multi-frame OpenLCB message.  <br /></td></tr>
<tr class="separator:afd9720395ccc0ac4c72018bb248c62b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27b7356b73282d498d6c6d7066d4ccdd" id="r_a27b7356b73282d498d6c6d7066d4ccdd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a27b7356b73282d498d6c6d7066d4ccdd">CanRxMessageHandler_middle_frame</a> (<a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *can_msg, uint8_t offset)</td></tr>
<tr class="memdesc:a27b7356b73282d498d6c6d7066d4ccdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles a middle frame of a multi-frame OpenLCB message.  <br /></td></tr>
<tr class="separator:a27b7356b73282d498d6c6d7066d4ccdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11fa1d9a015fb786516b00eaa93aa3d4" id="r_a11fa1d9a015fb786516b00eaa93aa3d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a11fa1d9a015fb786516b00eaa93aa3d4">CanRxMessageHandler_last_frame</a> (<a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *can_msg, uint8_t offset)</td></tr>
<tr class="memdesc:a11fa1d9a015fb786516b00eaa93aa3d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the last frame of a multi-frame OpenLCB message.  <br /></td></tr>
<tr class="separator:a11fa1d9a015fb786516b00eaa93aa3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa5ab07059b228d93331a4871c64f0aa" id="r_afa5ab07059b228d93331a4871c64f0aa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afa5ab07059b228d93331a4871c64f0aa">CanRxMessageHandler_single_frame</a> (<a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *can_msg, uint8_t offset, <a class="el" href="openlcb__types_8h.html#aececf1be5c268eb2c680b4a0cc778467">payload_type_enum</a> data_type)</td></tr>
<tr class="memdesc:afa5ab07059b228d93331a4871c64f0aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles a complete single-frame OpenLCB message.  <br /></td></tr>
<tr class="separator:afa5ab07059b228d93331a4871c64f0aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb044ac13496dded9928edbdd6fa8927" id="r_acb044ac13496dded9928edbdd6fa8927"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acb044ac13496dded9928edbdd6fa8927">CanRxMessageHandler_can_legacy_snip</a> (<a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *can_msg, uint8_t offset, <a class="el" href="openlcb__types_8h.html#aececf1be5c268eb2c680b4a0cc778467">payload_type_enum</a> data_type)</td></tr>
<tr class="memdesc:acb044ac13496dded9928edbdd6fa8927"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles legacy SNIP messages that lack standard framing bits.  <br /></td></tr>
<tr class="separator:acb044ac13496dded9928edbdd6fa8927"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d39c6d3d8fa18b4db3a844222f8d721" id="r_a9d39c6d3d8fa18b4db3a844222f8d721"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9d39c6d3d8fa18b4db3a844222f8d721">CanRxMessageHandler_stream_frame</a> (<a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *can_msg, uint8_t offset, <a class="el" href="openlcb__types_8h.html#aececf1be5c268eb2c680b4a0cc778467">payload_type_enum</a> data_type)</td></tr>
<tr class="memdesc:a9d39c6d3d8fa18b4db3a844222f8d721"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles stream protocol CAN frames (placeholder, not yet implemented).  <br /></td></tr>
<tr class="separator:a9d39c6d3d8fa18b4db3a844222f8d721"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5ab163a26257b020cff610f592a13d4" id="r_af5ab163a26257b020cff610f592a13d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af5ab163a26257b020cff610f592a13d4">CanRxMessageHandler_rid_frame</a> (<a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *can_msg)</td></tr>
<tr class="memdesc:af5ab163a26257b020cff610f592a13d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles RID (Reserve ID) CAN control frames.  <br /></td></tr>
<tr class="separator:af5ab163a26257b020cff610f592a13d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0edca70265b5777d972dfe607776276" id="r_ae0edca70265b5777d972dfe607776276"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae0edca70265b5777d972dfe607776276">CanRxMessageHandler_amd_frame</a> (<a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *can_msg)</td></tr>
<tr class="memdesc:ae0edca70265b5777d972dfe607776276"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles AMD (Alias Map Definition) CAN control frames.  <br /></td></tr>
<tr class="separator:ae0edca70265b5777d972dfe607776276"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6a95cd9b0b64f9bce258072279e3e6e" id="r_ad6a95cd9b0b64f9bce258072279e3e6e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad6a95cd9b0b64f9bce258072279e3e6e">CanRxMessageHandler_ame_frame</a> (<a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *can_msg)</td></tr>
<tr class="memdesc:ad6a95cd9b0b64f9bce258072279e3e6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles AME (Alias Map Enquiry) CAN control frames.  <br /></td></tr>
<tr class="separator:ad6a95cd9b0b64f9bce258072279e3e6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46f286844287b488746bab5131c404f0" id="r_a46f286844287b488746bab5131c404f0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a46f286844287b488746bab5131c404f0">CanRxMessageHandler_amr_frame</a> (<a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *can_msg)</td></tr>
<tr class="memdesc:a46f286844287b488746bab5131c404f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles AMR (Alias Map Reset) CAN control frames.  <br /></td></tr>
<tr class="separator:a46f286844287b488746bab5131c404f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c11e35eed23a505787d5c49b58dfd83" id="r_a9c11e35eed23a505787d5c49b58dfd83"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9c11e35eed23a505787d5c49b58dfd83">CanRxMessageHandler_error_info_report_frame</a> (<a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *can_msg)</td></tr>
<tr class="memdesc:a9c11e35eed23a505787d5c49b58dfd83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles Error Information Report CAN control frames.  <br /></td></tr>
<tr class="separator:a9c11e35eed23a505787d5c49b58dfd83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa958ec2e603dabb8eed0c6c0e0bacc94" id="r_aa958ec2e603dabb8eed0c6c0e0bacc94"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa958ec2e603dabb8eed0c6c0e0bacc94">CanRxMessageHandler_cid_frame</a> (<a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *can_msg)</td></tr>
<tr class="memdesc:aa958ec2e603dabb8eed0c6c0e0bacc94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles CID (Check ID) CAN control frames.  <br /></td></tr>
<tr class="separator:aa958ec2e603dabb8eed0c6c0e0bacc94"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Message handlers for processing received CAN frames into OpenLCB messages. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2024, Jim Kueneman All rights reserved. Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:<ul>
<li>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution. THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</li>
</ul>
</dd></dl>
<p>Handles multi-frame assembly, legacy SNIP, and all CAN control frames (CID, RID, AMD, AME, AMR, error reports). Invoked by the CAN Rx state machine.</p>
<dl class="section author"><dt>Author</dt><dd>Jim Kueneman </dd></dl>
<dl class="section date"><dt>Date</dt><dd>28 Feb 2026 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aaa035b3a9b3535b413f441c4cb6d741f" name="aaa035b3a9b3535b413f441c4cb6d741f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa035b3a9b3535b413f441c4cb6d741f">&#9670;&#160;</a></span>CanRxMessageHandler_initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanRxMessageHandler_initialize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structinterface__can__rx__message__handler__t.html">interface_can_rx_message_handler_t</a> *</td>          <td class="paramname"><span class="paramname"><em>interface_can_frame_message_handler</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Registers the dependency-injection interface for this module. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">interface_can_frame_message_handler</td><td>Pointer to a populated <a class="el" href="structinterface__can__rx__message__handler__t.html">interface_can_rx_message_handler_t</a>. Must remain valid for the lifetime of the application. All function pointers must be non-NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>NOT thread-safe - call during single-threaded initialization only. </dd>
<dd>
Must be called before any CAN frames are processed.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__rx__statemachine_8c.html#a90ffc180158c3b8810f3cd68fc904b65" title="Stores the dependency-injection interface pointer.">CanRxStatemachine_initialize</a></dd></dl>
<p>Registers the dependency-injection interface for this module. </p>

</div>
</div>
<a id="afd9720395ccc0ac4c72018bb248c62b8" name="afd9720395ccc0ac4c72018bb248c62b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd9720395ccc0ac4c72018bb248c62b8">&#9670;&#160;</a></span>CanRxMessageHandler_first_frame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanRxMessageHandler_first_frame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_msg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>offset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="openlcb__types_8h.html#aececf1be5c268eb2c680b4a0cc778467">payload_type_enum</a></td>          <td class="paramname"><span class="paramname"><em>data_type</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the first frame of a multi-frame OpenLCB message. </p>
<p>Allocates an OpenLCB buffer, initializes it with source/dest/MTI from the CAN header, copies the first payload chunk, and adds it to the buffer list for continued assembly. Sends a rejection if a duplicate first frame is detected or if buffer allocation fails.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_msg</td><td>Received CAN frame. </td></tr>
    <tr><td class="paramname">offset</td><td>Byte offset where OpenLCB data begins (2 if addressed, 0 if global). </td></tr>
    <tr><td class="paramname">data_type</td><td>Buffer type to allocate (BASIC, DATAGRAM, SNIP, STREAM).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>NOT thread-safe.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#a27b7356b73282d498d6c6d7066d4ccdd" title="Handles a middle frame of a multi-frame OpenLCB message.">CanRxMessageHandler_middle_frame</a> </dd>
<dd>
<a class="el" href="#a11fa1d9a015fb786516b00eaa93aa3d4" title="Handles the last frame of a multi-frame OpenLCB message.">CanRxMessageHandler_last_frame</a> </dd></dl>

</div>
</div>
<a id="a27b7356b73282d498d6c6d7066d4ccdd" name="a27b7356b73282d498d6c6d7066d4ccdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27b7356b73282d498d6c6d7066d4ccdd">&#9670;&#160;</a></span>CanRxMessageHandler_middle_frame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanRxMessageHandler_middle_frame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_msg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>offset</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles a middle frame of a multi-frame OpenLCB message. </p>
<p>Finds the in-progress message by source/dest/MTI and appends payload. Sends a rejection if no matching message is found.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_msg</td><td>Received CAN frame. </td></tr>
    <tr><td class="paramname">offset</td><td>Byte offset where OpenLCB data begins.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>NOT thread-safe.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#afd9720395ccc0ac4c72018bb248c62b8" title="Handles the first frame of a multi-frame OpenLCB message.">CanRxMessageHandler_first_frame</a> </dd>
<dd>
<a class="el" href="#a11fa1d9a015fb786516b00eaa93aa3d4" title="Handles the last frame of a multi-frame OpenLCB message.">CanRxMessageHandler_last_frame</a> </dd></dl>

</div>
</div>
<a id="a11fa1d9a015fb786516b00eaa93aa3d4" name="a11fa1d9a015fb786516b00eaa93aa3d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11fa1d9a015fb786516b00eaa93aa3d4">&#9670;&#160;</a></span>CanRxMessageHandler_last_frame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanRxMessageHandler_last_frame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_msg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>offset</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the last frame of a multi-frame OpenLCB message. </p>
<p>Appends final payload, marks message complete, removes from buffer list, and pushes to the OpenLCB FIFO. Sends a rejection if no matching in-progress message is found.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_msg</td><td>Received CAN frame. </td></tr>
    <tr><td class="paramname">offset</td><td>Byte offset where OpenLCB data begins.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>NOT thread-safe.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#afd9720395ccc0ac4c72018bb248c62b8" title="Handles the first frame of a multi-frame OpenLCB message.">CanRxMessageHandler_first_frame</a> </dd>
<dd>
<a class="el" href="#a27b7356b73282d498d6c6d7066d4ccdd" title="Handles a middle frame of a multi-frame OpenLCB message.">CanRxMessageHandler_middle_frame</a> </dd></dl>

</div>
</div>
<a id="afa5ab07059b228d93331a4871c64f0aa" name="afa5ab07059b228d93331a4871c64f0aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa5ab07059b228d93331a4871c64f0aa">&#9670;&#160;</a></span>CanRxMessageHandler_single_frame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanRxMessageHandler_single_frame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_msg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>offset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="openlcb__types_8h.html#aececf1be5c268eb2c680b4a0cc778467">payload_type_enum</a></td>          <td class="paramname"><span class="paramname"><em>data_type</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles a complete single-frame OpenLCB message. </p>
<p>Allocates a buffer, copies all payload data, and pushes directly to the OpenLCB FIFO. Silently drops if allocation fails.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_msg</td><td>Received CAN frame. </td></tr>
    <tr><td class="paramname">offset</td><td>Byte offset where OpenLCB data begins. </td></tr>
    <tr><td class="paramname">data_type</td><td>Buffer type to allocate (typically BASIC).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>NOT thread-safe.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="openlcb__buffer__fifo_8c.html#a3e461994b9ea26603691ef8bddce9686" title="Adds a message pointer to the tail of the FIFO.">OpenLcbBufferFifo_push</a> </dd></dl>

</div>
</div>
<a id="acb044ac13496dded9928edbdd6fa8927" name="acb044ac13496dded9928edbdd6fa8927"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb044ac13496dded9928edbdd6fa8927">&#9670;&#160;</a></span>CanRxMessageHandler_can_legacy_snip()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanRxMessageHandler_can_legacy_snip </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_msg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>offset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="openlcb__types_8h.html#aececf1be5c268eb2c680b4a0cc778467">payload_type_enum</a></td>          <td class="paramname"><span class="paramname"><em>data_type</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles legacy SNIP messages that lack standard framing bits. </p>
<p>Accumulates frames and counts NULL terminators to detect completion. A complete SNIP message contains exactly 6 NULLs.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_msg</td><td>Received CAN frame. </td></tr>
    <tr><td class="paramname">offset</td><td>Byte offset where SNIP data begins. </td></tr>
    <tr><td class="paramname">data_type</td><td>Must be SNIP.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>NOT thread-safe. </dd>
<dd>
Only correct for MTI_SIMPLE_NODE_INFO_REPLY without framing bits.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#afd9720395ccc0ac4c72018bb248c62b8" title="Handles the first frame of a multi-frame OpenLCB message.">CanRxMessageHandler_first_frame</a> - modern multi-frame handling</dd></dl>
<p>Handles legacy SNIP messages that lack standard framing bits.</p>
<p>Algorithm:</p><ol type="1">
<li>Search for an in-progress SNIP message matching source/dest/MTI.</li>
<li>If none found: delegate to CanRxMessageHandler_first_frame to allocate and start one.</li>
<li>If found and NULL count &lt; 6: delegate to CanRxMessageHandler_middle_frame to append data.</li>
<li>If found and NULL count &gt;= 6: delegate to CanRxMessageHandler_last_frame to complete it.</li>
</ol>
<pre class="fragment">* @param can_msg    Received CAN frame containing SNIP data.
* @param offset     Byte offset where SNIP data begins.
* @param data_type  Must be SNIP.
* </pre><dl class="section warning"><dt>Warning</dt><dd>Only correct for MTI_SIMPLE_NODE_INFO_REPLY without framing bits. </dd></dl>

</div>
</div>
<a id="a9d39c6d3d8fa18b4db3a844222f8d721" name="a9d39c6d3d8fa18b4db3a844222f8d721"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d39c6d3d8fa18b4db3a844222f8d721">&#9670;&#160;</a></span>CanRxMessageHandler_stream_frame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanRxMessageHandler_stream_frame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_msg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>offset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="openlcb__types_8h.html#aececf1be5c268eb2c680b4a0cc778467">payload_type_enum</a></td>          <td class="paramname"><span class="paramname"><em>data_type</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles stream protocol CAN frames (placeholder, not yet implemented). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_msg</td><td>Received CAN frame. </td></tr>
    <tr><td class="paramname">offset</td><td>Byte offset where stream data begins. </td></tr>
    <tr><td class="paramname">data_type</td><td>Must be STREAM.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Empty body - reserved for future use.</dd></dl>
<p>Handles stream protocol CAN frames (placeholder, not yet implemented). </p>

</div>
</div>
<a id="af5ab163a26257b020cff610f592a13d4" name="af5ab163a26257b020cff610f592a13d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5ab163a26257b020cff610f592a13d4">&#9670;&#160;</a></span>CanRxMessageHandler_rid_frame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanRxMessageHandler_rid_frame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_msg</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles RID (Reserve ID) CAN control frames. </p>
<p>Checks for a duplicate alias condition and flags it if found.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_msg</td><td>Received RID frame.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>NOT thread-safe.</dd></dl>
<p>Handles RID (Reserve ID) CAN control frames. </p>

</div>
</div>
<a id="ae0edca70265b5777d972dfe607776276" name="ae0edca70265b5777d972dfe607776276"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0edca70265b5777d972dfe607776276">&#9670;&#160;</a></span>CanRxMessageHandler_amd_frame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanRxMessageHandler_amd_frame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_msg</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles AMD (Alias Map Definition) CAN control frames. </p>
<p>Checks for a duplicate alias condition and flags it if found.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_msg</td><td>Received AMD frame (6-byte NodeID in payload).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>NOT thread-safe.</dd></dl>
<p>Handles AMD (Alias Map Definition) CAN control frames. </p>

</div>
</div>
<a id="ad6a95cd9b0b64f9bce258072279e3e6e" name="ad6a95cd9b0b64f9bce258072279e3e6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6a95cd9b0b64f9bce258072279e3e6e">&#9670;&#160;</a></span>CanRxMessageHandler_ame_frame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanRxMessageHandler_ame_frame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_msg</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles AME (Alias Map Enquiry) CAN control frames. </p>
<p>Responds with AMD frames for all our aliases (global query) or for a specific NodeID (targeted query if 6-byte payload present).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_msg</td><td>Received AME frame.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Silently drops responses if buffer allocation fails. </dd>
<dd>
NOT thread-safe.</dd></dl>
<p>Handles AME (Alias Map Enquiry) CAN control frames.</p>
<p>Algorithm:</p><ol type="1">
<li>Check for duplicate alias; return early if detected.</li>
<li>If payload is non-empty: look up by Node ID, respond with one AMD if found.</li>
<li>If payload is empty (global query): respond with AMD for every registered alias.</li>
</ol>
<pre class="fragment">* @param can_msg Received AME frame.
* </pre><dl class="section warning"><dt>Warning</dt><dd>Silently drops responses if buffer allocation fails. </dd></dl>

</div>
</div>
<a id="a46f286844287b488746bab5131c404f0" name="a46f286844287b488746bab5131c404f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46f286844287b488746bab5131c404f0">&#9670;&#160;</a></span>CanRxMessageHandler_amr_frame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanRxMessageHandler_amr_frame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_msg</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles AMR (Alias Map Reset) CAN control frames. </p>
<p>Checks for a duplicate alias condition and flags it if found.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_msg</td><td>Received AMR frame.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>NOT thread-safe.</dd></dl>
<p>Handles AMR (Alias Map Reset) CAN control frames. </p>

</div>
</div>
<a id="a9c11e35eed23a505787d5c49b58dfd83" name="a9c11e35eed23a505787d5c49b58dfd83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c11e35eed23a505787d5c49b58dfd83">&#9670;&#160;</a></span>CanRxMessageHandler_error_info_report_frame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanRxMessageHandler_error_info_report_frame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_msg</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles Error Information Report CAN control frames. </p>
<p>Checks for a duplicate alias condition and flags it if found.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_msg</td><td>Received error report frame.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>NOT thread-safe.</dd></dl>
<p>Handles Error Information Report CAN control frames. </p>

</div>
</div>
<a id="aa958ec2e603dabb8eed0c6c0e0bacc94" name="aa958ec2e603dabb8eed0c6c0e0bacc94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa958ec2e603dabb8eed0c6c0e0bacc94">&#9670;&#160;</a></span>CanRxMessageHandler_cid_frame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanRxMessageHandler_cid_frame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#a9fec363f8b39411fc3ce3bafd7182309">can_msg_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_msg</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles CID (Check ID) CAN control frames. </p>
<p>If we already have the claimed alias registered, sends an RID response to signal a conflict to the node performing alias allocation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_msg</td><td>Received CID frame.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Silently drops RID response if buffer allocation fails. </dd>
<dd>
NOT thread-safe.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#af5ab163a26257b020cff610f592a13d4" title="Handles RID (Reserve ID) CAN control frames.">CanRxMessageHandler_rid_frame</a></dd></dl>
<p>Handles CID (Check ID) CAN control frames.</p>
<pre class="fragment">* @param can_msg Received CID frame.
* </pre><dl class="section warning"><dt>Warning</dt><dd>Silently drops the RID reply if buffer allocation fails. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!doctype html>
<html>
    <body>
        <hr>
        <p style="margin-left: 10px; margin-right: 10px;">
            <b>Copyright (c)</b> 2026 Jim Kueneman all rights reserved. See the <a href="../licence.html">License</a>
        </p>
    </body>
</html>
