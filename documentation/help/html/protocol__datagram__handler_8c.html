<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenLcbCLib: src/openlcb/protocol_datagram_handler.c File Reference</title>
<link rel="icon" href="Diesel.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">OpenLcbCLib<span id="projectnumber">&#160;1.0 Alpha</span>
   </div>
   <div id="projectbrief">OpenSource C Library to create OpenLcb/Lcc Nodes</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_2e7e6c944bd9908e2f8181efb624bb5a.html">openlcb</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">protocol_datagram_handler.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Datagram protocol handler — reliable 0–72 byte addressed transfers.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a87c419434a44020752f0fd815f1a0832" id="r_a87c419434a44020752f0fd815f1a0832"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a87c419434a44020752f0fd815f1a0832">ProtocolDatagramHandler_initialize</a> (const <a class="el" href="structinterface__protocol__datagram__handler__t.html">interface_protocol_datagram_handler_t</a> *interface_protocol_datagram_handler)</td></tr>
<tr class="memdesc:a87c419434a44020752f0fd815f1a0832"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the callback interface. Call once at startup.  <br /></td></tr>
<tr class="separator:a87c419434a44020752f0fd815f1a0832"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d034624deb9c413c4977afa8987a6df" id="r_a4d034624deb9c413c4977afa8987a6df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4d034624deb9c413c4977afa8987a6df">ProtocolDatagramHandler_datagram</a> (<a class="el" href="structopenlcb__statemachine__info__t.html">openlcb_statemachine_info_t</a> *statemachine_info)</td></tr>
<tr class="memdesc:a4d034624deb9c413c4977afa8987a6df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main entry point — switches on payload[0] command byte.  <br /></td></tr>
<tr class="separator:a4d034624deb9c413c4977afa8987a6df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe5f21fda782ce61534588d89163ccff" id="r_abe5f21fda782ce61534588d89163ccff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abe5f21fda782ce61534588d89163ccff">ProtocolDatagramHandler_load_datagram_received_ok_message</a> (<a class="el" href="structopenlcb__statemachine__info__t.html">openlcb_statemachine_info_t</a> *statemachine_info, uint16_t reply_pending_time_in_seconds)</td></tr>
<tr class="memdesc:abe5f21fda782ce61534588d89163ccff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a Datagram Received OK message (MTI 0x0A28).  <br /></td></tr>
<tr class="separator:abe5f21fda782ce61534588d89163ccff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74c7ab99bff8408f9a00f77ed79da9f4" id="r_a74c7ab99bff8408f9a00f77ed79da9f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a74c7ab99bff8408f9a00f77ed79da9f4">ProtocolDatagramHandler_load_datagram_rejected_message</a> (<a class="el" href="structopenlcb__statemachine__info__t.html">openlcb_statemachine_info_t</a> *statemachine_info, uint16_t return_code)</td></tr>
<tr class="memdesc:a74c7ab99bff8408f9a00f77ed79da9f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a Datagram Rejected message (MTI 0x0A48).  <br /></td></tr>
<tr class="separator:a74c7ab99bff8408f9a00f77ed79da9f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4d3a37a821acbbf357b6fd09281e851" id="r_ad4d3a37a821acbbf357b6fd09281e851"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad4d3a37a821acbbf357b6fd09281e851">ProtocolDatagramHandler_datagram_received_ok</a> (<a class="el" href="structopenlcb__statemachine__info__t.html">openlcb_statemachine_info_t</a> *statemachine_info)</td></tr>
<tr class="memdesc:ad4d3a37a821acbbf357b6fd09281e851"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle incoming Datagram Received OK (MTI 0x0A28).  <br /></td></tr>
<tr class="separator:ad4d3a37a821acbbf357b6fd09281e851"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15cc3c7547fd0963f2ce553de92911bd" id="r_a15cc3c7547fd0963f2ce553de92911bd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a15cc3c7547fd0963f2ce553de92911bd">ProtocolDatagramHandler_datagram_rejected</a> (<a class="el" href="structopenlcb__statemachine__info__t.html">openlcb_statemachine_info_t</a> *statemachine_info)</td></tr>
<tr class="memdesc:a15cc3c7547fd0963f2ce553de92911bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle incoming Datagram Rejected (MTI 0x0A48).  <br /></td></tr>
<tr class="separator:a15cc3c7547fd0963f2ce553de92911bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7b23593b33a3a3c66f3afcd6886ebce" id="r_af7b23593b33a3a3c66f3afcd6886ebce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af7b23593b33a3a3c66f3afcd6886ebce">ProtocolDatagramHandler_clear_resend_datagram_message</a> (<a class="el" href="openlcb__types_8h.html#a2b2ee067d4e133b8a20b892d2337e0de">openlcb_node_t</a> *openlcb_node)</td></tr>
<tr class="memdesc:af7b23593b33a3a3c66f3afcd6886ebce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free stored datagram and clear resend flag for a node.  <br /></td></tr>
<tr class="separator:af7b23593b33a3a3c66f3afcd6886ebce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bab92fd769c43b46c7254b8a8ed4e79" id="r_a6bab92fd769c43b46c7254b8a8ed4e79"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6bab92fd769c43b46c7254b8a8ed4e79">ProtocolDatagramHandler_100ms_timer_tick</a> (void)</td></tr>
<tr class="memdesc:a6bab92fd769c43b46c7254b8a8ed4e79"><td class="mdescLeft">&#160;</td><td class="mdescRight">100 ms timer tick — placeholder for datagram timeout management.  <br /></td></tr>
<tr class="separator:a6bab92fd769c43b46c7254b8a8ed4e79"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Datagram protocol handler — reliable 0–72 byte addressed transfers. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2024, Jim Kueneman All rights reserved.</dd></dl>
<p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p>
<ul>
<li>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</li>
</ul>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
<p>Dispatches incoming datagrams to per-address-space callbacks for read, write, write-under-mask, and stream variants (both datagram- and stream-transport). Callback-based: the application populates an <a class="el" href="structinterface__protocol__datagram__handler__t.html">interface_protocol_datagram_handler_t</a> with handler pointers; NULL pointers cause automatic rejection with SUBCOMMAND_UNKNOWN.</p>
<p>Also handles Datagram Received OK / Rejected replies including retry logic for temporary errors.</p>
<dl class="section author"><dt>Author</dt><dd>Jim Kueneman </dd></dl>
<dl class="section date"><dt>Date</dt><dd>28 Feb 2026</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="protocol__datagram__handler_8h.html" title="Datagram protocol handler — reliable 0–72 byte addressed transfers. Routes incoming datagrams to per-...">protocol_datagram_handler.h</a> </dd>
<dd>
DatagramTransportS.pdf </dd>
<dd>
MemoryConfigurationS.pdf </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a87c419434a44020752f0fd815f1a0832" name="a87c419434a44020752f0fd815f1a0832"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87c419434a44020752f0fd815f1a0832">&#9670;&#160;</a></span>ProtocolDatagramHandler_initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ProtocolDatagramHandler_initialize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structinterface__protocol__datagram__handler__t.html">interface_protocol_datagram_handler_t</a> *</td>          <td class="paramname"><span class="paramname"><em>interface_protocol_datagram_handler</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores the callback interface. Call once at startup. </p>
<p>Stores the callback interface. Call once at startup before any datagram processing.</p>
<p>Algorithm:</p><ol type="1">
<li>Cast away const and store the pointer in module-level static</li>
</ol>
<pre class="fragment">* @param interface_protocol_datagram_handler  Populated callback table.
* </pre><dl class="section warning"><dt>Warning</dt><dd>Structure must remain valid for application lifetime. </dd></dl>

</div>
</div>
<a id="a4d034624deb9c413c4977afa8987a6df" name="a4d034624deb9c413c4977afa8987a6df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d034624deb9c413c4977afa8987a6df">&#9670;&#160;</a></span>ProtocolDatagramHandler_datagram()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ProtocolDatagramHandler_datagram </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structopenlcb__statemachine__info__t.html">openlcb_statemachine_info_t</a> *</td>          <td class="paramname"><span class="paramname"><em>statemachine_info</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main entry point — switches on payload[0] command byte. </p>
<p>Processes an incoming datagram. Dispatches to the appropriate handler based on the command byte (payload[0]).</p>
<p>Algorithm:</p><ol type="1">
<li>If payload[0] == CONFIG_MEM_CONFIGURATION (0x20), delegate to _handle_datagram_memory_configuration_command()</li>
<li>Otherwise reject with COMMAND_UNKNOWN</li>
</ol>
<pre class="fragment">* @param statemachine_info  Context with the received datagram.
* </pre> 
</div>
</div>
<a id="abe5f21fda782ce61534588d89163ccff" name="abe5f21fda782ce61534588d89163ccff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe5f21fda782ce61534588d89163ccff">&#9670;&#160;</a></span>ProtocolDatagramHandler_load_datagram_received_ok_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ProtocolDatagramHandler_load_datagram_received_ok_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structopenlcb__statemachine__info__t.html">openlcb_statemachine_info_t</a> *</td>          <td class="paramname"><span class="paramname"><em>statemachine_info</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>reply_pending_time_in_seconds</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a Datagram Received OK message (MTI 0x0A28). </p>
<p>Builds a Datagram Received OK message (MTI 0x0A28).</p>
<p>Algorithm:</p><ol type="1">
<li>Convert reply_pending_time_in_seconds to a 4-bit power-of-2 exponent (0 = no reply pending, 1 = 2 s, 2 = 4 s, … 15 = 32768 s)</li>
<li>Build MTI_DATAGRAM_OK_REPLY addressed back to the sender</li>
<li>Store DATAGRAM_OK_REPLY_PENDING | exponent in payload[0]</li>
<li>Mark outgoing message valid</li>
</ol>
<pre class="fragment">* @param statemachine_info               Current context.
* @param reply_pending_time_in_seconds   0 for simple OK, else seconds until
*                                        reply (rounded up to 2^N).
* </pre> 
</div>
</div>
<a id="a74c7ab99bff8408f9a00f77ed79da9f4" name="a74c7ab99bff8408f9a00f77ed79da9f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74c7ab99bff8408f9a00f77ed79da9f4">&#9670;&#160;</a></span>ProtocolDatagramHandler_load_datagram_rejected_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ProtocolDatagramHandler_load_datagram_rejected_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structopenlcb__statemachine__info__t.html">openlcb_statemachine_info_t</a> *</td>          <td class="paramname"><span class="paramname"><em>statemachine_info</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>return_code</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a Datagram Rejected message (MTI 0x0A48). </p>
<p>Builds a Datagram Rejected message (MTI 0x0A48).</p>
<p>Algorithm:</p><ol type="1">
<li>Build MTI_DATAGRAM_REJECTED_REPLY addressed back to the sender</li>
<li>Copy 16-bit return_code into payload[0..1]</li>
<li>Mark outgoing message valid</li>
</ol>
<pre class="fragment">* @param statemachine_info  Current context.
* @param return_code        OpenLCB error code (0x1xxx permanent, 0x2xxx temporary).
* </pre> 
</div>
</div>
<a id="ad4d3a37a821acbbf357b6fd09281e851" name="ad4d3a37a821acbbf357b6fd09281e851"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4d3a37a821acbbf357b6fd09281e851">&#9670;&#160;</a></span>ProtocolDatagramHandler_datagram_received_ok()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ProtocolDatagramHandler_datagram_received_ok </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structopenlcb__statemachine__info__t.html">openlcb_statemachine_info_t</a> *</td>          <td class="paramname"><span class="paramname"><em>statemachine_info</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle incoming Datagram Received OK (MTI 0x0A28). </p>
<p>Handles an incoming Datagram Received OK reply. Clears the resend flag and frees the stored datagram awaiting acknowledgement.</p>
<p>Algorithm:</p><ol type="1">
<li>Clear resend flag and free the stored datagram buffer</li>
<li>Set outgoing_msg_info.valid = false (nothing to send)</li>
</ol>
<pre class="fragment">* @param statemachine_info  Context with the received OK reply.
* </pre> 
</div>
</div>
<a id="a15cc3c7547fd0963f2ce553de92911bd" name="a15cc3c7547fd0963f2ce553de92911bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15cc3c7547fd0963f2ce553de92911bd">&#9670;&#160;</a></span>ProtocolDatagramHandler_datagram_rejected()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ProtocolDatagramHandler_datagram_rejected </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structopenlcb__statemachine__info__t.html">openlcb_statemachine_info_t</a> *</td>          <td class="paramname"><span class="paramname"><em>statemachine_info</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle incoming Datagram Rejected (MTI 0x0A48). </p>
<p>Handles an incoming Datagram Rejected reply. Sets the resend flag for temporary errors; clears retry state for permanent errors.</p>
<p>Algorithm:</p><ol type="1">
<li>Extract error code from payload word 0</li>
<li>If ERROR_TEMPORARY bit set and a stored datagram exists, set resend_datagram flag for retry</li>
<li>If permanent error, clear resend flag and free stored buffer</li>
<li>Set outgoing_msg_info.valid = false</li>
</ol>
<pre class="fragment">* @param statemachine_info  Context with the received rejection.
* </pre> 
</div>
</div>
<a id="af7b23593b33a3a3c66f3afcd6886ebce" name="af7b23593b33a3a3c66f3afcd6886ebce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7b23593b33a3a3c66f3afcd6886ebce">&#9670;&#160;</a></span>ProtocolDatagramHandler_clear_resend_datagram_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ProtocolDatagramHandler_clear_resend_datagram_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="openlcb__types_8h.html#a2b2ee067d4e133b8a20b892d2337e0de">openlcb_node_t</a> *</td>          <td class="paramname"><span class="paramname"><em>openlcb_node</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free stored datagram and clear resend flag for a node. </p>
<p>Frees any stored datagram and clears the resend flag for the node.</p>
<p>Algorithm:</p><ol type="1">
<li>If last_received_datagram exists, lock/free/unlock it and NULL the pointer</li>
<li>Clear resend_datagram flag</li>
</ol>
<pre class="fragment">* @param openlcb_node  Target node.
* </pre><dl class="section note"><dt>Note</dt><dd>Safe to call when no datagram is stored. </dd></dl>

</div>
</div>
<a id="a6bab92fd769c43b46c7254b8a8ed4e79" name="a6bab92fd769c43b46c7254b8a8ed4e79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bab92fd769c43b46c7254b8a8ed4e79">&#9670;&#160;</a></span>ProtocolDatagramHandler_100ms_timer_tick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ProtocolDatagramHandler_100ms_timer_tick </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>100 ms timer tick — placeholder for datagram timeout management. </p>
<p>100 ms timer tick for datagram timeout management (placeholder). </p>

</div>
</div>
</div><!-- contents -->
<!doctype html>
<html>
    <body>
        <hr>
        <p style="margin-left: 10px; margin-right: 10px;">
            <b>Copyright (c)</b> 2026 Jim Kueneman all rights reserved. See the <a href="../licence.html">License</a>
        </p>
    </body>
</html>
