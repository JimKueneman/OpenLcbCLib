<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenLcbCLib: src/openlcb/openlcb_buffer_fifo.c File Reference</title>
<link rel="icon" href="Diesel.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">OpenLcbCLib<span id="projectnumber">&#160;1.0 Alpha</span>
   </div>
   <div id="projectbrief">OpenSource C Library to create OpenLcb/Lcc Nodes</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_2e7e6c944bd9908e2f8181efb624bb5a.html">openlcb</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">openlcb_buffer_fifo.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implementation of the FIFO buffer for OpenLcb messages.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenlcb__msg__fifo__t.html">openlcb_msg_fifo_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">FIFO structure containing circular buffer and pointers.  <a href="structopenlcb__msg__fifo__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a104e44950234e12cfc9684b97a46d8b3" id="r_a104e44950234e12cfc9684b97a46d8b3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a104e44950234e12cfc9684b97a46d8b3">LEN_MESSAGE_FIFO_BUFFER</a>&#160;&#160;&#160;(<a class="el" href="group__buffer__size__constants.html#ga871c59e021446d9f2fd97f1e81bfa76a">LEN_MESSAGE_BUFFER</a> + 1)</td></tr>
<tr class="memdesc:a104e44950234e12cfc9684b97a46d8b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">FIFO buffer size (one extra slot for full detection without additional state)  <br /></td></tr>
<tr class="separator:a104e44950234e12cfc9684b97a46d8b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8a001a3bc68d6587d8d9b11c694e937e" id="r_a8a001a3bc68d6587d8d9b11c694e937e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8a001a3bc68d6587d8d9b11c694e937e">OpenLcbBufferFifo_initialize</a> (void)</td></tr>
<tr class="memdesc:a8a001a3bc68d6587d8d9b11c694e937e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the OpenLcb Message Buffer FIFO.  <br /></td></tr>
<tr class="separator:a8a001a3bc68d6587d8d9b11c694e937e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e461994b9ea26603691ef8bddce9686" id="r_a3e461994b9ea26603691ef8bddce9686"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structopenlcb__msg__t.html">openlcb_msg_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3e461994b9ea26603691ef8bddce9686">OpenLcbBufferFifo_push</a> (<a class="el" href="structopenlcb__msg__t.html">openlcb_msg_t</a> *new_msg)</td></tr>
<tr class="memdesc:a3e461994b9ea26603691ef8bddce9686"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pushes a new OpenLcb message into the FIFO buffer.  <br /></td></tr>
<tr class="separator:a3e461994b9ea26603691ef8bddce9686"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b754f3f1d498fbaa62d1b0c80015232" id="r_a1b754f3f1d498fbaa62d1b0c80015232"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structopenlcb__msg__t.html">openlcb_msg_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1b754f3f1d498fbaa62d1b0c80015232">OpenLcbBufferFifo_pop</a> (void)</td></tr>
<tr class="memdesc:a1b754f3f1d498fbaa62d1b0c80015232"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pops an OpenLcb message off the FIFO buffer.  <br /></td></tr>
<tr class="separator:a1b754f3f1d498fbaa62d1b0c80015232"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5bb38b5949241f2c65c14ec56e19cfd" id="r_af5bb38b5949241f2c65c14ec56e19cfd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af5bb38b5949241f2c65c14ec56e19cfd">OpenLcbBufferFifo_is_empty</a> (void)</td></tr>
<tr class="memdesc:af5bb38b5949241f2c65c14ec56e19cfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tests if there is a message in the FIFO buffer.  <br /></td></tr>
<tr class="separator:af5bb38b5949241f2c65c14ec56e19cfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53c7bb1734270e37eeec4a1d180306cc" id="r_a53c7bb1734270e37eeec4a1d180306cc"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a53c7bb1734270e37eeec4a1d180306cc">OpenLcbBufferFifo_get_allocated_count</a> (void)</td></tr>
<tr class="memdesc:a53c7bb1734270e37eeec4a1d180306cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of messages currently in the FIFO buffer.  <br /></td></tr>
<tr class="separator:a53c7bb1734270e37eeec4a1d180306cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a418f8f3aaa0749ce0a12a9d518679484" id="r_a418f8f3aaa0749ce0a12a9d518679484"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structopenlcb__msg__fifo__t.html">openlcb_msg_fifo_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a418f8f3aaa0749ce0a12a9d518679484">openlcb_msg_buffer_fifo</a></td></tr>
<tr class="memdesc:a418f8f3aaa0749ce0a12a9d518679484"><td class="mdescLeft">&#160;</td><td class="mdescRight">Static FIFO instance (single global queue)  <br /></td></tr>
<tr class="separator:a418f8f3aaa0749ce0a12a9d518679484"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of the FIFO buffer for OpenLcb messages. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2024, Jim Kueneman All rights reserved.</dd></dl>
<p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p>
<ul>
<li>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</li>
</ul>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
<p>Implements a circular buffer (ring buffer) FIFO queue for OpenLCB message pointers. The implementation uses the classic "one slot wasted" approach where the buffer size is (capacity + 1) to allow simple full/empty detection without requiring additional state variables.</p>
<p>Algorithm details:</p><ul>
<li>Circular buffer with power-of-two friendly wraparound</li>
<li>Head points to next insertion position</li>
<li>Tail points to next removal position</li>
<li>Empty condition: head == tail</li>
<li>Full condition: (head + 1) % buffer_size == tail</li>
<li>Count calculation handles wraparound correctly</li>
</ul>
<p>Memory characteristics:</p><ul>
<li>Fixed size allocation at compile time</li>
<li>No dynamic memory allocation during runtime</li>
<li>Pointer storage only (8 bytes per message on 64-bit, 4 bytes on 32-bit)</li>
</ul>
<dl class="section author"><dt>Author</dt><dd>Jim Kueneman </dd></dl>
<dl class="section date"><dt>Date</dt><dd>17 Jan 2026 </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a104e44950234e12cfc9684b97a46d8b3" name="a104e44950234e12cfc9684b97a46d8b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a104e44950234e12cfc9684b97a46d8b3">&#9670;&#160;</a></span>LEN_MESSAGE_FIFO_BUFFER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEN_MESSAGE_FIFO_BUFFER&#160;&#160;&#160;(<a class="el" href="group__buffer__size__constants.html#ga871c59e021446d9f2fd97f1e81bfa76a">LEN_MESSAGE_BUFFER</a> + 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FIFO buffer size (one extra slot for full detection without additional state) </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a8a001a3bc68d6587d8d9b11c694e937e" name="a8a001a3bc68d6587d8d9b11c694e937e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a001a3bc68d6587d8d9b11c694e937e">&#9670;&#160;</a></span>OpenLcbBufferFifo_initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OpenLcbBufferFifo_initialize </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the OpenLcb Message Buffer FIFO. </p>
<p>Algorithm: Sets up an empty FIFO by clearing all pointers and resetting indices.</p><ol type="1">
<li>Iterate through all LEN_MESSAGE_FIFO_BUFFER slots</li>
<li>Set each slot to NULL</li>
<li>Set head = 0 (next insertion at position 0)</li>
<li>Set tail = 0 (next removal from position 0)</li>
<li>Result: Empty FIFO (head == tail)</li>
</ol>
<p>Use cases:</p><ul>
<li>Called once during application startup</li>
<li>Required before any FIFO operations</li>
<li>Must be called after <a class="el" href="openlcb__buffer__store_8c.html#aaa929fa9f3796aa554fb29771116b864" title="Initializes the OpenLcb Buffer Store.">OpenLcbBufferStore_initialize()</a></li>
</ul>
<dl class="section warning"><dt>Warning</dt><dd>MUST be called exactly once during initialization </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Call after <a class="el" href="openlcb__buffer__store_8c.html#aaa929fa9f3796aa554fb29771116b864" title="Initializes the OpenLcb Buffer Store.">OpenLcbBufferStore_initialize()</a></dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="openlcb__buffer__store_8c.html#aaa929fa9f3796aa554fb29771116b864" title="Initializes the OpenLcb Buffer Store.">OpenLcbBufferStore_initialize</a> - Must be called first </dd></dl>

</div>
</div>
<a id="a3e461994b9ea26603691ef8bddce9686" name="a3e461994b9ea26603691ef8bddce9686"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e461994b9ea26603691ef8bddce9686">&#9670;&#160;</a></span>OpenLcbBufferFifo_push()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structopenlcb__msg__t.html">openlcb_msg_t</a> * OpenLcbBufferFifo_push </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structopenlcb__msg__t.html">openlcb_msg_t</a> *</td>          <td class="paramname"><span class="paramname"><em>new_msg</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pushes a new OpenLcb message into the FIFO buffer. </p>
<p>Algorithm: Implements circular buffer insertion with full detection.</p><ol type="1">
<li>Calculate next head position: next = (head + 1) % buffer_size</li>
<li>If next &gt;= buffer_size, wrap to 0</li>
<li>Check if FIFO is full: if next == tail, return NULL</li>
<li>If not full:<ul>
<li>Store new_msg pointer at list[head]</li>
<li>Update head = next</li>
<li>Return new_msg (success)</li>
</ul>
</li>
<li>If full, return NULL (failure)</li>
</ol>
<p>Use cases:</p><ul>
<li>Queuing incoming messages</li>
<li>Buffering outgoing messages</li>
<li>Managing message backlog</li>
</ul>
<pre class="fragment">* @param new_msg Pointer to message allocated from buffer store (must NOT be NULL)
* </pre><dl class="section return"><dt>Returns</dt><dd>Pointer to queued message on success, NULL if FIFO is full</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Returns NULL when FIFO is full </dd>
<dd>
Passing NULL will store NULL in FIFO - no validation performed </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Caller retains ownership of message </dd>
<dd>
Check return value for NULL before assuming success</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>The "one slot wasted" approach means maximum capacity is LEN_MESSAGE_BUFFER, not LEN_MESSAGE_FIFO_BUFFER</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="openlcb__buffer__store_8c.html#a56857b0d3eaed4ee651e9ac794cad201" title="Allocates a new buffer of the specified payload type.">OpenLcbBufferStore_allocate_buffer</a> - Allocate message before pushing </dd>
<dd>
<a class="el" href="#a1b754f3f1d498fbaa62d1b0c80015232" title="Pops an OpenLcb message off the FIFO buffer.">OpenLcbBufferFifo_pop</a> - Remove messages from FIFO </dd></dl>

</div>
</div>
<a id="a1b754f3f1d498fbaa62d1b0c80015232" name="a1b754f3f1d498fbaa62d1b0c80015232"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b754f3f1d498fbaa62d1b0c80015232">&#9670;&#160;</a></span>OpenLcbBufferFifo_pop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structopenlcb__msg__t.html">openlcb_msg_t</a> * OpenLcbBufferFifo_pop </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pops an OpenLcb message off the FIFO buffer. </p>
<p>Algorithm: Implements circular buffer removal with empty detection.</p><ol type="1">
<li>Initialize result = NULL</li>
<li>Check if FIFO is empty: if head == tail, return NULL</li>
<li>If not empty:<ul>
<li>Get message pointer from list[tail]</li>
<li>Increment tail = tail + 1</li>
<li>If tail &gt;= buffer_size, wrap tail to 0</li>
<li>Return the retrieved message pointer</li>
</ul>
</li>
<li>If empty, return NULL</li>
</ol>
<p>Use cases:</p><ul>
<li>Processing queued messages in order</li>
<li>Transmitting queued messages</li>
<li>Draining FIFO</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>Pointer to oldest message, or NULL if FIFO is empty</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Returns NULL when empty </dd>
<dd>
Caller must free returned message with <a class="el" href="openlcb__buffer__store_8c.html#a678e335cc01529581d2b7e69ae0ad023" title="Decrements reference count and potentially frees the buffer for reuse.">OpenLcbBufferStore_free_buffer()</a> </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Always check return value for NULL </dd>
<dd>
Caller becomes responsible for freeing message</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#a3e461994b9ea26603691ef8bddce9686" title="Pushes a new OpenLcb message into the FIFO buffer.">OpenLcbBufferFifo_push</a> - Add messages to FIFO </dd>
<dd>
<a class="el" href="openlcb__buffer__store_8c.html#a678e335cc01529581d2b7e69ae0ad023" title="Decrements reference count and potentially frees the buffer for reuse.">OpenLcbBufferStore_free_buffer</a> - Free popped message when done </dd>
<dd>
<a class="el" href="#af5bb38b5949241f2c65c14ec56e19cfd" title="Tests if there is a message in the FIFO buffer.">OpenLcbBufferFifo_is_empty</a> - Check before popping </dd></dl>

</div>
</div>
<a id="af5bb38b5949241f2c65c14ec56e19cfd" name="af5bb38b5949241f2c65c14ec56e19cfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5bb38b5949241f2c65c14ec56e19cfd">&#9670;&#160;</a></span>OpenLcbBufferFifo_is_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool OpenLcbBufferFifo_is_empty </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tests if there is a message in the FIFO buffer. </p>
<p>Algorithm: Simple pointer comparison to determine empty state.</p><ol type="1">
<li>Compare head pointer with tail pointer</li>
<li>Return (head == tail)</li>
</ol>
<p>Use cases:</p><ul>
<li>Check before popping</li>
<li>Polling for messages</li>
<li>Idle detection</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>True if FIFO is empty (no messages), false if at least one message present</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Non-destructive operation</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#a1b754f3f1d498fbaa62d1b0c80015232" title="Pops an OpenLcb message off the FIFO buffer.">OpenLcbBufferFifo_pop</a> - Use after checking not empty </dd>
<dd>
<a class="el" href="#a53c7bb1734270e37eeec4a1d180306cc" title="Returns the number of messages currently in the FIFO buffer.">OpenLcbBufferFifo_get_allocated_count</a> - Get exact count </dd></dl>

</div>
</div>
<a id="a53c7bb1734270e37eeec4a1d180306cc" name="a53c7bb1734270e37eeec4a1d180306cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53c7bb1734270e37eeec4a1d180306cc">&#9670;&#160;</a></span>OpenLcbBufferFifo_get_allocated_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t OpenLcbBufferFifo_get_allocated_count </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the number of messages currently in the FIFO buffer. </p>
<p>Algorithm: Calculates occupancy handling circular buffer wraparound.</p><ol type="1">
<li>If tail &gt; head (wraparound case):<ul>
<li>count = head + (buffer_size - tail)</li>
<li>This accounts for messages from tail to end, plus messages from start to head</li>
</ul>
</li>
<li>Else (normal case):<ul>
<li>count = head - tail</li>
<li>Simple difference when head is ahead of tail</li>
</ul>
</li>
<li>Return calculated count</li>
</ol>
<p>Examples:</p><ul>
<li>head=5, tail=2, size=10: count = 5-2 = 3</li>
<li>head=2, tail=8, size=10: count = 2+(10-8) = 4</li>
</ul>
<p>Use cases:</p><ul>
<li>Monitoring FIFO utilization</li>
<li>Load balancing</li>
<li>Flow control</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>Number of messages in buffer (0 to LEN_MESSAGE_BUFFER)</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Maximum return value is LEN_MESSAGE_BUFFER (one slot reserved)</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#af5bb38b5949241f2c65c14ec56e19cfd" title="Tests if there is a message in the FIFO buffer.">OpenLcbBufferFifo_is_empty</a> - Simpler zero check </dd>
<dd>
<a class="el" href="#a3e461994b9ea26603691ef8bddce9686" title="Pushes a new OpenLcb message into the FIFO buffer.">OpenLcbBufferFifo_push</a> - Increases count </dd>
<dd>
<a class="el" href="#a1b754f3f1d498fbaa62d1b0c80015232" title="Pops an OpenLcb message off the FIFO buffer.">OpenLcbBufferFifo_pop</a> - Decreases count </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a418f8f3aaa0749ce0a12a9d518679484" name="a418f8f3aaa0749ce0a12a9d518679484"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a418f8f3aaa0749ce0a12a9d518679484">&#9670;&#160;</a></span>openlcb_msg_buffer_fifo</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structopenlcb__msg__fifo__t.html">openlcb_msg_fifo_t</a> openlcb_msg_buffer_fifo</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Static FIFO instance (single global queue) </p>

</div>
</div>
</div><!-- contents -->
<!doctype html>
<html>
    <body>
        <hr>
        <p style="margin-left: 10px; margin-right: 10px;">
            <b>Copyright (c)</b> 2026 Jim Kueneman all rights reserved. See the <a href="../licence.html">License</a>
        </p>
    </body>
</html>
