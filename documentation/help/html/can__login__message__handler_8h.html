<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenLcbCLib: src/drivers/canbus/can_login_message_handler.h File Reference</title>
<link rel="icon" href="Diesel.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">OpenLcbCLib<span id="projectnumber">&#160;1.0 Alpha</span>
   </div>
   <div id="projectbrief">OpenSource C Library to create OpenLcb/Lcc Nodes</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_c718a368270b13c54d94892d20736f45.html">drivers</a></li><li class="navelem"><a class="el" href="dir_858afec057d05dde4e87dd686afd4670.html">canbus</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">can_login_message_handler.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Message handlers for CAN login sequence.  
<a href="#details">More...</a></p>

<p><a href="can__login__message__handler_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structinterface__can__login__message__handler__t.html">interface_can_login_message_handler_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A structure to hold pointers to functions for dependencies this module requires <a class="el" href="can__login__message__handler_8h.html">can_login_message_handler.h</a>.  <a href="structinterface__can__login__message__handler__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5c515891dde09e1d2376e0d0ecc392ec" id="r_a5c515891dde09e1d2376e0d0ecc392ec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5c515891dde09e1d2376e0d0ecc392ec">CanLoginMessageHandler_initialize</a> (const <a class="el" href="structinterface__can__login__message__handler__t.html">interface_can_login_message_handler_t</a> *interface)</td></tr>
<tr class="memdesc:a5c515891dde09e1d2376e0d0ecc392ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the CAN Login Message Handler module.  <br /></td></tr>
<tr class="separator:a5c515891dde09e1d2376e0d0ecc392ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15578ce7b04e385b036135db0fe04248" id="r_a15578ce7b04e385b036135db0fe04248"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a15578ce7b04e385b036135db0fe04248">CanLoginMessageHandler_state_init</a> (<a class="el" href="can__types_8h.html#ad52cca2be7565c8d23f3cc4d83cbc19e">can_statemachine_info_t</a> *can_statemachine_info)</td></tr>
<tr class="memdesc:a15578ce7b04e385b036135db0fe04248"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the first state in the CAN login sequence.  <br /></td></tr>
<tr class="separator:a15578ce7b04e385b036135db0fe04248"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49950e3b1ce029449d252aa5bcf2c799" id="r_a49950e3b1ce029449d252aa5bcf2c799"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a49950e3b1ce029449d252aa5bcf2c799">CanLoginMessageHandler_state_generate_seed</a> (<a class="el" href="can__types_8h.html#ad52cca2be7565c8d23f3cc4d83cbc19e">can_statemachine_info_t</a> *can_statemachine_info)</td></tr>
<tr class="memdesc:a49950e3b1ce029449d252aa5bcf2c799"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the second state in the CAN login sequence.  <br /></td></tr>
<tr class="separator:a49950e3b1ce029449d252aa5bcf2c799"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbada8cf2b6a3c5dc73bac3cb57ad6b0" id="r_acbada8cf2b6a3c5dc73bac3cb57ad6b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acbada8cf2b6a3c5dc73bac3cb57ad6b0">CanLoginMessageHandler_state_generate_alias</a> (<a class="el" href="can__types_8h.html#ad52cca2be7565c8d23f3cc4d83cbc19e">can_statemachine_info_t</a> *can_statemachine_info)</td></tr>
<tr class="memdesc:acbada8cf2b6a3c5dc73bac3cb57ad6b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the third state in the CAN login sequence.  <br /></td></tr>
<tr class="separator:acbada8cf2b6a3c5dc73bac3cb57ad6b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad417a47b53614faa89382dd1f724c311" id="r_ad417a47b53614faa89382dd1f724c311"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad417a47b53614faa89382dd1f724c311">CanLoginMessageHandler_state_load_cid07</a> (<a class="el" href="can__types_8h.html#ad52cca2be7565c8d23f3cc4d83cbc19e">can_statemachine_info_t</a> *can_statemachine_info)</td></tr>
<tr class="memdesc:ad417a47b53614faa89382dd1f724c311"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the fourth state in the CAN login sequence.  <br /></td></tr>
<tr class="separator:ad417a47b53614faa89382dd1f724c311"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a4c529c0fdc15ba83cdd61fe91216d8" id="r_a0a4c529c0fdc15ba83cdd61fe91216d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0a4c529c0fdc15ba83cdd61fe91216d8">CanLoginMessageHandler_state_load_cid06</a> (<a class="el" href="can__types_8h.html#ad52cca2be7565c8d23f3cc4d83cbc19e">can_statemachine_info_t</a> *can_statemachine_info)</td></tr>
<tr class="memdesc:a0a4c529c0fdc15ba83cdd61fe91216d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the fifth state in the CAN login sequence.  <br /></td></tr>
<tr class="separator:a0a4c529c0fdc15ba83cdd61fe91216d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a452fa6a87c0be4de318f40958579e72c" id="r_a452fa6a87c0be4de318f40958579e72c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a452fa6a87c0be4de318f40958579e72c">CanLoginMessageHandler_state_load_cid05</a> (<a class="el" href="can__types_8h.html#ad52cca2be7565c8d23f3cc4d83cbc19e">can_statemachine_info_t</a> *can_statemachine_info)</td></tr>
<tr class="memdesc:a452fa6a87c0be4de318f40958579e72c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the sixth state in the CAN login sequence.  <br /></td></tr>
<tr class="separator:a452fa6a87c0be4de318f40958579e72c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2d0270b36a9e0b33fb6966d08f1b390" id="r_aa2d0270b36a9e0b33fb6966d08f1b390"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa2d0270b36a9e0b33fb6966d08f1b390">CanLoginMessageHandler_state_load_cid04</a> (<a class="el" href="can__types_8h.html#ad52cca2be7565c8d23f3cc4d83cbc19e">can_statemachine_info_t</a> *can_statemachine_info)</td></tr>
<tr class="memdesc:aa2d0270b36a9e0b33fb6966d08f1b390"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the seventh state in the CAN login sequence.  <br /></td></tr>
<tr class="separator:aa2d0270b36a9e0b33fb6966d08f1b390"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ceb83bfdd574957d1e8ddc6d820caed" id="r_a3ceb83bfdd574957d1e8ddc6d820caed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3ceb83bfdd574957d1e8ddc6d820caed">CanLoginMessageHandler_state_wait_200ms</a> (<a class="el" href="can__types_8h.html#ad52cca2be7565c8d23f3cc4d83cbc19e">can_statemachine_info_t</a> *can_statemachine_info)</td></tr>
<tr class="memdesc:a3ceb83bfdd574957d1e8ddc6d820caed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the eighth state in the CAN login sequence.  <br /></td></tr>
<tr class="separator:a3ceb83bfdd574957d1e8ddc6d820caed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41f40ed325a32cf2f61fb66522c21977" id="r_a41f40ed325a32cf2f61fb66522c21977"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a41f40ed325a32cf2f61fb66522c21977">CanLoginMessageHandler_state_load_rid</a> (<a class="el" href="can__types_8h.html#ad52cca2be7565c8d23f3cc4d83cbc19e">can_statemachine_info_t</a> *can_statemachine_info)</td></tr>
<tr class="memdesc:a41f40ed325a32cf2f61fb66522c21977"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the ninth state in the CAN login sequence.  <br /></td></tr>
<tr class="separator:a41f40ed325a32cf2f61fb66522c21977"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86ceb4c89ce3880a1a34fcd8805b4064" id="r_a86ceb4c89ce3880a1a34fcd8805b4064"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a86ceb4c89ce3880a1a34fcd8805b4064">CanLoginMessageHandler_state_load_amd</a> (<a class="el" href="can__types_8h.html#ad52cca2be7565c8d23f3cc4d83cbc19e">can_statemachine_info_t</a> *can_statemachine_info)</td></tr>
<tr class="memdesc:a86ceb4c89ce3880a1a34fcd8805b4064"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the tenth and final state in the CAN login sequence.  <br /></td></tr>
<tr class="separator:a86ceb4c89ce3880a1a34fcd8805b4064"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Message handlers for CAN login sequence. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2024, Jim Kueneman All rights reserved. Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:<ul>
<li>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution. THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</li>
</ul>
</dd></dl>
<p>Provides state handlers for the 10-state CAN login sequence that allocates a 12-bit alias for a node's 48-bit Node ID. Each handler builds the appropriate CAN control frame (CID, RID, AMD) according to the OpenLCB CAN Frame Transfer Standard.</p>
<dl class="section author"><dt>Author</dt><dd>Jim Kueneman </dd></dl>
<dl class="section date"><dt>Date</dt><dd>17 Jan 2026 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a5c515891dde09e1d2376e0d0ecc392ec" name="a5c515891dde09e1d2376e0d0ecc392ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c515891dde09e1d2376e0d0ecc392ec">&#9670;&#160;</a></span>CanLoginMessageHandler_initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanLoginMessageHandler_initialize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structinterface__can__login__message__handler__t.html">interface_can_login_message_handler_t</a> *</td>          <td class="paramname"><span class="paramname"><em>interface</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes the CAN Login Message Handler module. </p>
<p>Stores the interface pointer for use by all state handler functions. Must be called before any state handlers are invoked.</p>
<p>Use cases:</p><ul>
<li>Called once during application initialization</li>
<li>Must be called before login state machine starts</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">interface</td><td>Pointers to function dependencies this module requires</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Interface pointer must remain valid for lifetime of application </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>This must always be called during application initialization</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__login__statemachine_8c.html#a2837c06613e89097db3602bf773332a8" title="Initializes the CAN Login State Machine.">CanLoginStateMachine_initialize</a> - Initializes the state machine that calls these handlers</dd></dl>
<p>Algorithm:</p><ol type="1">
<li>Cast away const qualifier from interface pointer</li>
<li>Store interface pointer in static variable</li>
</ol>
<p>Use cases:</p><ul>
<li>Called once during application initialization</li>
<li>Must be called before login state machine starts</li>
</ul>
<pre class="fragment">* @param interface Pointers to function dependencies this module requires
* </pre><dl class="section warning"><dt>Warning</dt><dd>Interface pointer must remain valid for lifetime of application </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>This must always be called during application initialization</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__login__statemachine_8c.html#a2837c06613e89097db3602bf773332a8" title="Initializes the CAN Login State Machine.">CanLoginStateMachine_initialize</a> - Initializes the state machine that calls these handlers </dd></dl>

</div>
</div>
<a id="a15578ce7b04e385b036135db0fe04248" name="a15578ce7b04e385b036135db0fe04248"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15578ce7b04e385b036135db0fe04248">&#9670;&#160;</a></span>CanLoginMessageHandler_state_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanLoginMessageHandler_state_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#ad52cca2be7565c8d23f3cc4d83cbc19e">can_statemachine_info_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_statemachine_info</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the first state in the CAN login sequence. </p>
<p>Initializes the node's seed to its Node ID and transitions to the GENERATE_ALIAS state, skipping GENERATE_SEED which is only used when handling alias conflicts.</p>
<p>Use cases:</p><ul>
<li>First state called when node begins login sequence</li>
<li>Prepares node for alias generation</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_statemachine_info</td><td>Pointer to a struct that has the node and buffer for any outgoing message that may be necessary</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Structure pointer must not be NULL </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Node seed is set to Node ID value </dd>
<dd>
Transitions node to RUNSTATE_GENERATE_ALIAS</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__login__message__handler_8c.html#acbada8cf2b6a3c5dc73bac3cb57ad6b0" title="Handles the third state in the CAN login sequence.">CanLoginMessageHandler_state_generate_alias</a> - Next state in sequence </dd>
<dd>
<a class="el" href="can__login__message__handler_8c.html#a49950e3b1ce029449d252aa5bcf2c799" title="Handles the second state in the CAN login sequence.">CanLoginMessageHandler_state_generate_seed</a> - Used only for alias conflicts</dd></dl>
<p>Algorithm:</p><ol type="1">
<li>Set node seed to node ID value</li>
<li>Set run_state to RUNSTATE_GENERATE_ALIAS</li>
<li>Skip GENERATE_SEED state (only used for conflicts)</li>
</ol>
<p>Use cases:</p><ul>
<li>First state called when node begins login sequence</li>
<li>Prepares node for alias generation</li>
</ul>
<pre class="fragment">* @param can_statemachine_info Pointer to a struct that has the node and buffer for any outgoing
* message that may be necessary
* </pre><dl class="section warning"><dt>Warning</dt><dd>Structure pointer must not be NULL </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Node seed is set to Node ID value </dd>
<dd>
Transitions node to RUNSTATE_GENERATE_ALIAS</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__login__message__handler_8c.html#acbada8cf2b6a3c5dc73bac3cb57ad6b0" title="Handles the third state in the CAN login sequence.">CanLoginMessageHandler_state_generate_alias</a> - Next state in sequence </dd>
<dd>
<a class="el" href="can__login__message__handler_8c.html#a49950e3b1ce029449d252aa5bcf2c799" title="Handles the second state in the CAN login sequence.">CanLoginMessageHandler_state_generate_seed</a> - Used only for alias conflicts </dd></dl>

</div>
</div>
<a id="a49950e3b1ce029449d252aa5bcf2c799" name="a49950e3b1ce029449d252aa5bcf2c799"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49950e3b1ce029449d252aa5bcf2c799">&#9670;&#160;</a></span>CanLoginMessageHandler_state_generate_seed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanLoginMessageHandler_state_generate_seed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#ad52cca2be7565c8d23f3cc4d83cbc19e">can_statemachine_info_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_statemachine_info</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the second state in the CAN login sequence. </p>
<p>Generates a new seed value using an LFSR algorithm and transitions to GENERATE_ALIAS state. This state is only reached when an alias conflict occurs and a new alias must be generated.</p>
<p>Use cases:</p><ul>
<li>Called when alias conflict is detected</li>
<li>Generates new seed to produce different alias</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_statemachine_info</td><td>Pointer to a struct that has the node and buffer for any outgoing message that may be necessary</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Structure pointer must not be NULL </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>New seed value overwrites previous seed </dd>
<dd>
Transitions node to RUNSTATE_GENERATE_ALIAS</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__login__message__handler_8c.html#acbada8cf2b6a3c5dc73bac3cb57ad6b0" title="Handles the third state in the CAN login sequence.">CanLoginMessageHandler_state_generate_alias</a> - Next state in sequence</dd></dl>
<p>Algorithm:</p><ol type="1">
<li>Call _generate_seed with current seed</li>
<li>Store new seed value in node</li>
<li>Set run_state to RUNSTATE_GENERATE_ALIAS</li>
</ol>
<p>Use cases:</p><ul>
<li>Called when alias conflict is detected</li>
<li>Generates new seed to produce different alias</li>
</ul>
<pre class="fragment">* @param can_statemachine_info Pointer to a struct that has the node and buffer for any outgoing
* message that may be necessary
* </pre><dl class="section warning"><dt>Warning</dt><dd>Structure pointer must not be NULL </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>New seed value overwrites previous seed </dd>
<dd>
Transitions node to RUNSTATE_GENERATE_ALIAS</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__login__message__handler_8c.html#acbada8cf2b6a3c5dc73bac3cb57ad6b0" title="Handles the third state in the CAN login sequence.">CanLoginMessageHandler_state_generate_alias</a> - Next state in sequence </dd></dl>

</div>
</div>
<a id="acbada8cf2b6a3c5dc73bac3cb57ad6b0" name="acbada8cf2b6a3c5dc73bac3cb57ad6b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbada8cf2b6a3c5dc73bac3cb57ad6b0">&#9670;&#160;</a></span>CanLoginMessageHandler_state_generate_alias()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanLoginMessageHandler_state_generate_alias </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#ad52cca2be7565c8d23f3cc4d83cbc19e">can_statemachine_info_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_statemachine_info</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the third state in the CAN login sequence. </p>
<p>Generates a 12-bit alias from the current seed using an LFSR algorithm, registers the alias/Node ID mapping, and invokes the optional alias change callback.</p>
<p>Use cases:</p><ul>
<li>Generates alias from seed value</li>
<li>Registers tentative alias mapping</li>
<li>Prepares to send CID frames</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_statemachine_info</td><td>Pointer to a struct that has the node and buffer for any outgoing message that may be necessary</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Structure pointer must not be NULL </dd>
<dd>
Alias must not be zero per OpenLCB spec </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Alias is registered as tentative mapping </dd>
<dd>
Transitions node to RUNSTATE_LOAD_CHECK_ID_07</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__login__message__handler_8c.html#ad417a47b53614faa89382dd1f724c311" title="Handles the fourth state in the CAN login sequence.">CanLoginMessageHandler_state_load_cid07</a> - Next state in sequence </dd>
<dd>
<a class="el" href="can__login__message__handler_8c.html#a49950e3b1ce029449d252aa5bcf2c799" title="Handles the second state in the CAN login sequence.">CanLoginMessageHandler_state_generate_seed</a> - Called if conflict detected</dd></dl>
<p>Algorithm:</p><ol type="1">
<li>Call _generate_alias with current seed</li>
<li>Store alias in node structure</li>
<li>Register alias/Node ID mapping via interface</li>
<li>If callback registered, invoke on_alias_change</li>
<li>Set run_state to RUNSTATE_LOAD_CHECK_ID_07</li>
</ol>
<p>Use cases:</p><ul>
<li>Generates alias from seed value</li>
<li>Registers tentative alias mapping</li>
<li>Prepares to send CID frames</li>
</ul>
<pre class="fragment">* @param can_statemachine_info Pointer to a struct that has the node and buffer for any outgoing
* message that may be necessary
* </pre><dl class="section warning"><dt>Warning</dt><dd>Structure pointer must not be NULL </dd>
<dd>
Alias must not be zero per OpenLCB spec </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Alias is registered as tentative mapping </dd>
<dd>
Transitions node to RUNSTATE_LOAD_CHECK_ID_07</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__login__message__handler_8c.html#ad417a47b53614faa89382dd1f724c311" title="Handles the fourth state in the CAN login sequence.">CanLoginMessageHandler_state_load_cid07</a> - Next state in sequence </dd>
<dd>
<a class="el" href="can__login__message__handler_8c.html#a49950e3b1ce029449d252aa5bcf2c799" title="Handles the second state in the CAN login sequence.">CanLoginMessageHandler_state_generate_seed</a> - Called if conflict detected </dd></dl>

</div>
</div>
<a id="ad417a47b53614faa89382dd1f724c311" name="ad417a47b53614faa89382dd1f724c311"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad417a47b53614faa89382dd1f724c311">&#9670;&#160;</a></span>CanLoginMessageHandler_state_load_cid07()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanLoginMessageHandler_state_load_cid07 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#ad52cca2be7565c8d23f3cc4d83cbc19e">can_statemachine_info_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_statemachine_info</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the fourth state in the CAN login sequence. </p>
<p>Loads the CAN output buffer with a CID7 frame containing bits 47-36 (top 12 bits) of the Node ID. This is the first Check ID frame in the sequence.</p>
<p>Use cases:</p><ul>
<li>Sends first CID frame to check for alias conflicts</li>
<li>Announces bits 47-36 of Node ID to network</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_statemachine_info</td><td>Pointer to a struct that has the node and buffer for any outgoing message that may be necessary</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Structure pointer must not be NULL </dd>
<dd>
Outgoing message buffer must be valid </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Sets payload_count to 0 (CID frames have no data bytes) </dd>
<dd>
Transitions node to RUNSTATE_LOAD_CHECK_ID_06</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__login__message__handler_8c.html#a0a4c529c0fdc15ba83cdd61fe91216d8" title="Handles the fifth state in the CAN login sequence.">CanLoginMessageHandler_state_load_cid06</a> - Next state in sequence</dd></dl>
<p>Algorithm:</p><ol type="1">
<li>Set payload_count to 0 (CID frames have no data)</li>
<li>Build CAN identifier with CID7 format</li>
<li>Extract bits 47-36 of Node ID</li>
<li>Combine with alias in identifier</li>
<li>Set outgoing message valid flag</li>
<li>Set run_state to RUNSTATE_LOAD_CHECK_ID_06</li>
</ol>
<p>Use cases:</p><ul>
<li>Sends first CID frame to check for alias conflicts</li>
<li>Announces bits 47-36 of Node ID to network</li>
</ul>
<pre class="fragment">* @param can_statemachine_info Pointer to a struct that has the node and buffer for any outgoing
* message that may be necessary
* </pre><dl class="section warning"><dt>Warning</dt><dd>Structure pointer must not be NULL </dd>
<dd>
Outgoing message buffer must be valid </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Sets payload_count to 0 (CID frames have no data bytes) </dd>
<dd>
Transitions node to RUNSTATE_LOAD_CHECK_ID_06</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__login__message__handler_8c.html#a0a4c529c0fdc15ba83cdd61fe91216d8" title="Handles the fifth state in the CAN login sequence.">CanLoginMessageHandler_state_load_cid06</a> - Next state in sequence </dd></dl>

</div>
</div>
<a id="a0a4c529c0fdc15ba83cdd61fe91216d8" name="a0a4c529c0fdc15ba83cdd61fe91216d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a4c529c0fdc15ba83cdd61fe91216d8">&#9670;&#160;</a></span>CanLoginMessageHandler_state_load_cid06()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanLoginMessageHandler_state_load_cid06 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#ad52cca2be7565c8d23f3cc4d83cbc19e">can_statemachine_info_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_statemachine_info</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the fifth state in the CAN login sequence. </p>
<p>Loads the CAN output buffer with a CID6 frame containing bits 35-24 (second 12 bits) of the Node ID.</p>
<p>Use cases:</p><ul>
<li>Sends second CID frame to check for alias conflicts</li>
<li>Announces bits 35-24 of Node ID to network</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_statemachine_info</td><td>Pointer to a struct that has the node and buffer for any outgoing message that may be necessary</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Structure pointer must not be NULL </dd>
<dd>
Outgoing message buffer must be valid </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Sets payload_count to 0 (CID frames have no data bytes) </dd>
<dd>
Transitions node to RUNSTATE_LOAD_CHECK_ID_05</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__login__message__handler_8c.html#a452fa6a87c0be4de318f40958579e72c" title="Handles the sixth state in the CAN login sequence.">CanLoginMessageHandler_state_load_cid05</a> - Next state in sequence</dd></dl>
<p>Algorithm:</p><ol type="1">
<li>Set payload_count to 0 (CID frames have no data)</li>
<li>Build CAN identifier with CID6 format</li>
<li>Extract bits 35-24 of Node ID</li>
<li>Combine with alias in identifier</li>
<li>Set outgoing message valid flag</li>
<li>Set run_state to RUNSTATE_LOAD_CHECK_ID_05</li>
</ol>
<p>Use cases:</p><ul>
<li>Sends second CID frame to check for alias conflicts</li>
<li>Announces bits 35-24 of Node ID to network</li>
</ul>
<pre class="fragment">* @param can_statemachine_info Pointer to a struct that has the node and buffer for any outgoing
* message that may be necessary
* </pre><dl class="section warning"><dt>Warning</dt><dd>Structure pointer must not be NULL </dd>
<dd>
Outgoing message buffer must be valid </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Sets payload_count to 0 (CID frames have no data bytes) </dd>
<dd>
Transitions node to RUNSTATE_LOAD_CHECK_ID_05</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__login__message__handler_8c.html#a452fa6a87c0be4de318f40958579e72c" title="Handles the sixth state in the CAN login sequence.">CanLoginMessageHandler_state_load_cid05</a> - Next state in sequence </dd></dl>

</div>
</div>
<a id="a452fa6a87c0be4de318f40958579e72c" name="a452fa6a87c0be4de318f40958579e72c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a452fa6a87c0be4de318f40958579e72c">&#9670;&#160;</a></span>CanLoginMessageHandler_state_load_cid05()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanLoginMessageHandler_state_load_cid05 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#ad52cca2be7565c8d23f3cc4d83cbc19e">can_statemachine_info_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_statemachine_info</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the sixth state in the CAN login sequence. </p>
<p>Loads the CAN output buffer with a CID5 frame containing bits 23-12 (third 12 bits) of the Node ID.</p>
<p>Use cases:</p><ul>
<li>Sends third CID frame to check for alias conflicts</li>
<li>Announces bits 23-12 of Node ID to network</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_statemachine_info</td><td>Pointer to a struct that has the node and buffer for any outgoing message that may be necessary</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Structure pointer must not be NULL </dd>
<dd>
Outgoing message buffer must be valid </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Sets payload_count to 0 (CID frames have no data bytes) </dd>
<dd>
Transitions node to RUNSTATE_LOAD_CHECK_ID_04</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__login__message__handler_8c.html#aa2d0270b36a9e0b33fb6966d08f1b390" title="Handles the seventh state in the CAN login sequence.">CanLoginMessageHandler_state_load_cid04</a> - Next state in sequence</dd></dl>
<p>Algorithm:</p><ol type="1">
<li>Set payload_count to 0 (CID frames have no data)</li>
<li>Build CAN identifier with CID5 format</li>
<li>Extract bits 23-12 of Node ID</li>
<li>Combine with alias in identifier</li>
<li>Set outgoing message valid flag</li>
<li>Set run_state to RUNSTATE_LOAD_CHECK_ID_04</li>
</ol>
<p>Use cases:</p><ul>
<li>Sends third CID frame to check for alias conflicts</li>
<li>Announces bits 23-12 of Node ID to network</li>
</ul>
<pre class="fragment">* @param can_statemachine_info Pointer to a struct that has the node and buffer for any outgoing
* message that may be necessary
* </pre><dl class="section warning"><dt>Warning</dt><dd>Structure pointer must not be NULL </dd>
<dd>
Outgoing message buffer must be valid </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Sets payload_count to 0 (CID frames have no data bytes) </dd>
<dd>
Transitions node to RUNSTATE_LOAD_CHECK_ID_04</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__login__message__handler_8c.html#aa2d0270b36a9e0b33fb6966d08f1b390" title="Handles the seventh state in the CAN login sequence.">CanLoginMessageHandler_state_load_cid04</a> - Next state in sequence </dd></dl>

</div>
</div>
<a id="aa2d0270b36a9e0b33fb6966d08f1b390" name="aa2d0270b36a9e0b33fb6966d08f1b390"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2d0270b36a9e0b33fb6966d08f1b390">&#9670;&#160;</a></span>CanLoginMessageHandler_state_load_cid04()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanLoginMessageHandler_state_load_cid04 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#ad52cca2be7565c8d23f3cc4d83cbc19e">can_statemachine_info_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_statemachine_info</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the seventh state in the CAN login sequence. </p>
<p>Loads the CAN output buffer with a CID4 frame containing bits 11-0 (bottom 12 bits) of the Node ID. Also resets the node's timer for the mandatory 200ms wait period.</p>
<p>Use cases:</p><ul>
<li>Sends fourth and final CID frame to check for alias conflicts</li>
<li>Announces bits 11-0 of Node ID to network</li>
<li>Starts 200ms wait timer</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_statemachine_info</td><td>Pointer to a struct that has the node and buffer for any outgoing message that may be necessary</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Structure pointer must not be NULL </dd>
<dd>
Outgoing message buffer must be valid </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Sets payload_count to 0 (CID frames have no data bytes) </dd>
<dd>
Resets timerticks to 0 for 200ms wait </dd>
<dd>
Transitions node to RUNSTATE_WAIT_200ms</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__login__message__handler_8c.html#a3ceb83bfdd574957d1e8ddc6d820caed" title="Handles the eighth state in the CAN login sequence.">CanLoginMessageHandler_state_wait_200ms</a> - Next state in sequence</dd></dl>
<p>Algorithm:</p><ol type="1">
<li>Set payload_count to 0 (CID frames have no data)</li>
<li>Build CAN identifier with CID4 format</li>
<li>Extract bits 11-0 of Node ID (shift left by 12)</li>
<li>Combine with alias in identifier</li>
<li>Reset timerticks to 0 for 200ms wait</li>
<li>Set outgoing message valid flag</li>
<li>Set run_state to RUNSTATE_WAIT_200ms</li>
</ol>
<p>Use cases:</p><ul>
<li>Sends fourth and final CID frame to check for alias conflicts</li>
<li>Announces bits 11-0 of Node ID to network</li>
<li>Starts 200ms wait timer</li>
</ul>
<pre class="fragment">* @param can_statemachine_info Pointer to a struct that has the node and buffer for any outgoing
* message that may be necessary
* </pre><dl class="section warning"><dt>Warning</dt><dd>Structure pointer must not be NULL </dd>
<dd>
Outgoing message buffer must be valid </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Sets payload_count to 0 (CID frames have no data bytes) </dd>
<dd>
Resets timerticks to 0 for 200ms wait </dd>
<dd>
Transitions node to RUNSTATE_WAIT_200ms</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__login__message__handler_8c.html#a3ceb83bfdd574957d1e8ddc6d820caed" title="Handles the eighth state in the CAN login sequence.">CanLoginMessageHandler_state_wait_200ms</a> - Next state in sequence </dd></dl>

</div>
</div>
<a id="a3ceb83bfdd574957d1e8ddc6d820caed" name="a3ceb83bfdd574957d1e8ddc6d820caed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ceb83bfdd574957d1e8ddc6d820caed">&#9670;&#160;</a></span>CanLoginMessageHandler_state_wait_200ms()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanLoginMessageHandler_state_wait_200ms </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#ad52cca2be7565c8d23f3cc4d83cbc19e">can_statemachine_info_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_statemachine_info</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the eighth state in the CAN login sequence. </p>
<p>Waits for a minimum of 200 milliseconds as required by the OpenLCB CAN Frame Transfer Standard before sending the RID frame. Uses the node's timerticks counter which is incremented by the 100ms timer.</p>
<p>Use cases:</p><ul>
<li>Enforces mandatory 200ms wait between CID4 and RID frames</li>
<li>Allows network time to detect alias conflicts</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_statemachine_info</td><td>Pointer to a struct that has the node and buffer for any outgoing message that may be necessary</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Structure pointer must not be NULL </dd>
<dd>
Requires 100ms timer to be running </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Transitions to RUNSTATE_LOAD_RESERVE_ID when timerticks exceeds 2 </dd>
<dd>
Does not modify any buffers during wait</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Timer value of 2 represents 200ms (2 x 100ms ticks)</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__login__message__handler_8c.html#a41f40ed325a32cf2f61fb66522c21977" title="Handles the ninth state in the CAN login sequence.">CanLoginMessageHandler_state_load_rid</a> - Next state in sequence</dd></dl>
<p>Algorithm:</p><ol type="1">
<li>Check if timerticks exceeds 2 (200ms elapsed)</li>
<li>If yes, set run_state to RUNSTATE_LOAD_RESERVE_ID</li>
<li>If no, remain in current state</li>
</ol>
<p>Use cases:</p><ul>
<li>Enforces mandatory 200ms wait between CID4 and RID frames</li>
<li>Allows network time to detect alias conflicts</li>
</ul>
<pre class="fragment">* @param can_statemachine_info Pointer to a struct that has the node and buffer for any outgoing
* message that may be necessary
* </pre><dl class="section warning"><dt>Warning</dt><dd>Structure pointer must not be NULL </dd>
<dd>
Requires 100ms timer to be running </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Transitions to RUNSTATE_LOAD_RESERVE_ID when timerticks exceeds 2 </dd>
<dd>
Does not modify any buffers during wait</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Timer value of 2 represents 200ms (2 x 100ms ticks)</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__login__message__handler_8c.html#a41f40ed325a32cf2f61fb66522c21977" title="Handles the ninth state in the CAN login sequence.">CanLoginMessageHandler_state_load_rid</a> - Next state in sequence </dd></dl>

</div>
</div>
<a id="a41f40ed325a32cf2f61fb66522c21977" name="a41f40ed325a32cf2f61fb66522c21977"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41f40ed325a32cf2f61fb66522c21977">&#9670;&#160;</a></span>CanLoginMessageHandler_state_load_rid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanLoginMessageHandler_state_load_rid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#ad52cca2be7565c8d23f3cc4d83cbc19e">can_statemachine_info_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_statemachine_info</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the ninth state in the CAN login sequence. </p>
<p>Loads the CAN output buffer with an RID (Reserve ID) frame to claim the alias. This indicates no conflicts were detected during the CID sequence and 200ms wait period.</p>
<p>Use cases:</p><ul>
<li>Reserves the alias after successful conflict check</li>
<li>Indicates node is ready to send AMD frame</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_statemachine_info</td><td>Pointer to a struct that has the node and buffer for any outgoing message that may be necessary</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Structure pointer must not be NULL </dd>
<dd>
Outgoing message buffer must be valid </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Sets payload_count to 0 (RID frames have no data bytes) </dd>
<dd>
Transitions node to RUNSTATE_LOAD_ALIAS_MAP_DEFINITION</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__login__message__handler_8c.html#a86ceb4c89ce3880a1a34fcd8805b4064" title="Handles the tenth and final state in the CAN login sequence.">CanLoginMessageHandler_state_load_amd</a> - Next state in sequence</dd></dl>
<p>Algorithm:</p><ol type="1">
<li>Build CAN identifier with RID format and alias</li>
<li>Set payload_count to 0 (RID frames have no data)</li>
<li>Set outgoing message valid flag</li>
<li>Set run_state to RUNSTATE_LOAD_ALIAS_MAP_DEFINITION</li>
</ol>
<p>Use cases:</p><ul>
<li>Reserves the alias after successful conflict check</li>
<li>Indicates node is ready to send AMD frame</li>
</ul>
<pre class="fragment">* @param can_statemachine_info Pointer to a struct that has the node and buffer for any outgoing
* message that may be necessary
* </pre><dl class="section warning"><dt>Warning</dt><dd>Structure pointer must not be NULL </dd>
<dd>
Outgoing message buffer must be valid </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Sets payload_count to 0 (RID frames have no data bytes) </dd>
<dd>
Transitions node to RUNSTATE_LOAD_ALIAS_MAP_DEFINITION</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__login__message__handler_8c.html#a86ceb4c89ce3880a1a34fcd8805b4064" title="Handles the tenth and final state in the CAN login sequence.">CanLoginMessageHandler_state_load_amd</a> - Next state in sequence </dd></dl>

</div>
</div>
<a id="a86ceb4c89ce3880a1a34fcd8805b4064" name="a86ceb4c89ce3880a1a34fcd8805b4064"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86ceb4c89ce3880a1a34fcd8805b4064">&#9670;&#160;</a></span>CanLoginMessageHandler_state_load_amd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CanLoginMessageHandler_state_load_amd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="can__types_8h.html#ad52cca2be7565c8d23f3cc4d83cbc19e">can_statemachine_info_t</a> *</td>          <td class="paramname"><span class="paramname"><em>can_statemachine_info</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the tenth and final state in the CAN login sequence. </p>
<p>Loads the CAN output buffer with an AMD (Alias Map Definition) frame containing the full 48-bit Node ID. Marks the node as permitted on the network and updates the alias mapping to permitted status.</p>
<p>Use cases:</p><ul>
<li>Completes CAN login sequence</li>
<li>Announces full Node ID to network</li>
<li>Transitions node to permitted state</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_statemachine_info</td><td>Pointer to a struct that has the node and buffer for any outgoing message that may be necessary</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Structure pointer must not be NULL </dd>
<dd>
Outgoing message buffer must be valid </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Copies 6-byte Node ID into payload </dd>
<dd>
Sets node permitted flag to true </dd>
<dd>
Sets alias mapping is_permitted flag to true </dd>
<dd>
Transitions node to RUNSTATE_LOAD_INITIALIZATION_COMPLETE</dd></dl>
<dl class="section note"><dt>Note</dt><dd>After this state, node can send OpenLCB messages on CAN network</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__utilities_8c.html#a1c8cdd807ea3471409c6ae74a8472bfb" title="Copies a 48-bit Node ID into CAN message payload.">CanUtilities_copy_node_id_to_payload</a> - Helper used to copy Node ID</dd></dl>
<p>Algorithm:</p><ol type="1">
<li>Build CAN identifier with AMD format and alias</li>
<li>Copy 6-byte Node ID into payload using utility function</li>
<li>Set outgoing message valid flag</li>
<li>Set node permitted flag to true</li>
<li>Find alias mapping via interface</li>
<li>Set is_permitted flag in mapping to true</li>
<li>Set run_state to RUNSTATE_LOAD_INITIALIZATION_COMPLETE</li>
</ol>
<p>Use cases:</p><ul>
<li>Completes CAN login sequence</li>
<li>Announces full Node ID to network</li>
<li>Transitions node to permitted state</li>
</ul>
<pre class="fragment">* @param can_statemachine_info Pointer to a struct that has the node and buffer for any outgoing
* message that may be necessary
* </pre><dl class="section warning"><dt>Warning</dt><dd>Structure pointer must not be NULL </dd>
<dd>
Outgoing message buffer must be valid </dd>
<dd>
NOT thread-safe</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Copies 6-byte Node ID into payload </dd>
<dd>
Sets node permitted flag to true </dd>
<dd>
Sets alias mapping is_permitted flag to true </dd>
<dd>
Transitions node to RUNSTATE_LOAD_INITIALIZATION_COMPLETE</dd></dl>
<dl class="section note"><dt>Note</dt><dd>After this state, node can send OpenLCB messages on CAN network</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__utilities_8c.html#a1c8cdd807ea3471409c6ae74a8472bfb" title="Copies a 48-bit Node ID into CAN message payload.">CanUtilities_copy_node_id_to_payload</a> - Helper used to copy Node ID </dd></dl>

</div>
</div>
</div><!-- contents -->
<!doctype html>
<html>
    <body>
        <hr>
        <p style="margin-left: 10px; margin-right: 10px;">
            <b>Copyright (c)</b> 2026 Jim Kueneman all rights reserved. See the <a href="../licence.html">License</a>
        </p>
    </body>
</html>
