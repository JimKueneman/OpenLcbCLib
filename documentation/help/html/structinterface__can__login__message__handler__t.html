<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenLcbCLib: interface_can_login_message_handler_t Struct Reference</title>
<link rel="icon" href="Diesel.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">OpenLcbCLib<span id="projectnumber">&#160;1.0 Alpha</span>
   </div>
   <div id="projectbrief">OpenSource C Library to create OpenLcb/Lcc Nodes</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle"><div class="title">interface_can_login_message_handler_t Struct Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Interface structure for CAN login message handler callback functions.  
 <a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a4e26a8a1f17944358a4e91f5b579fc23" id="r_a4e26a8a1f17944358a4e91f5b579fc23"><td class="memItemLeft" align="right" valign="top"><a class="el" href="can__types_8h.html#a6742a625d665303b409391926b8a65b1">alias_mapping_t</a> *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4e26a8a1f17944358a4e91f5b579fc23">alias_mapping_register</a> )(uint16_t alias, <a class="el" href="openlcb__types_8h.html#ab63b0eaf893badf557397c77fb74fe3c">node_id_t</a> node_id)</td></tr>
<tr class="memdesc:a4e26a8a1f17944358a4e91f5b579fc23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback to register an alias/Node ID mapping.  <br /></td></tr>
<tr class="separator:a4e26a8a1f17944358a4e91f5b579fc23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91e0e61d6e690cb434694399ee865976" id="r_a91e0e61d6e690cb434694399ee865976"><td class="memItemLeft" align="right" valign="top"><a class="el" href="can__types_8h.html#a6742a625d665303b409391926b8a65b1">alias_mapping_t</a> *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a91e0e61d6e690cb434694399ee865976">alias_mapping_find_mapping_by_alias</a> )(uint16_t alias)</td></tr>
<tr class="memdesc:a91e0e61d6e690cb434694399ee865976"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback to find alias mapping by alias.  <br /></td></tr>
<tr class="separator:a91e0e61d6e690cb434694399ee865976"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a015cf925a8f563f2ff7ab585ac9b809d" id="r_a015cf925a8f563f2ff7ab585ac9b809d"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a015cf925a8f563f2ff7ab585ac9b809d">on_alias_change</a> )(uint16_t alias, <a class="el" href="openlcb__types_8h.html#ab63b0eaf893badf557397c77fb74fe3c">node_id_t</a> node_id)</td></tr>
<tr class="memdesc:a015cf925a8f563f2ff7ab585ac9b809d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optional callback for alias registration notification.  <br /></td></tr>
<tr class="separator:a015cf925a8f563f2ff7ab585ac9b809d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interface structure for CAN login message handler callback functions. </p>
<p>This structure defines the callback interface for the CAN login message handler, which constructs CAN control frames during the alias allocation sequence. The interface provides callbacks for alias mapping management and optional application notification when aliases are successfully allocated.</p>
<p>The CAN login sequence requires alias/Node ID mapping functionality to:</p><ul>
<li>Register tentative alias mappings during alias generation</li>
<li>Check for alias conflicts by searching existing mappings</li>
<li>Update mapping status when alias is successfully reserved</li>
</ul>
<p>The login message handler constructs the following CAN control frames in sequence:</p><ol type="1">
<li>CID7, CID6, CID5, CID4 (Check ID frames - announce Node ID fragments)</li>
<li>RID (Reserve ID frame - claim the alias after 200ms wait)</li>
<li>AMD (Alias Map Definition frame - announce full Node ID mapping)</li>
</ol>
<p>All required callbacks must be provided for proper alias allocation and conflict detection. The optional callback allows applications to receive notification when aliases are successfully registered.</p>
<dl class="section note"><dt>Note</dt><dd>Required callbacks must be set before calling CanLoginMessageHandler_initialize </dd>
<dd>
All required callbacks are REQUIRED - none can be NULL</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="can__login__message__handler_8c.html#a5c515891dde09e1d2376e0d0ecc392ec" title="Initializes the CAN Login Message Handler module.">CanLoginMessageHandler_initialize</a> </dd>
<dd>
<a class="el" href="can__login__statemachine_8h.html" title="State machine for logging nodes into the OpenLCB/LCC network.">can_login_statemachine.h</a> - State machine that invokes these handlers </dd></dl>
</div><h2 class="groupheader">Field Documentation</h2>
<a id="a4e26a8a1f17944358a4e91f5b579fc23" name="a4e26a8a1f17944358a4e91f5b579fc23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e26a8a1f17944358a4e91f5b579fc23">&#9670;&#160;</a></span>alias_mapping_register</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="can__types_8h.html#a6742a625d665303b409391926b8a65b1">alias_mapping_t</a> *(* alias_mapping_register) (uint16_t alias, <a class="el" href="openlcb__types_8h.html#ab63b0eaf893badf557397c77fb74fe3c">node_id_t</a> node_id)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback to register an alias/Node ID mapping. </p>
<p>This required callback registers a new alias/Node ID pair in the alias mapping table. During the alias generation phase, this callback is invoked to create a tentative mapping that will be marked as permitted after successful AMD transmission.</p>
<p>The callback should:</p><ul>
<li>Search for an available slot in the alias mapping table</li>
<li>Store the alias and Node ID in the slot</li>
<li>Initialize mapping flags (is_duplicate, is_permitted)</li>
<li>Return pointer to the created mapping entry</li>
</ul>
<p>Typical implementation: AliasMappings_register</p>
<dl class="section note"><dt>Note</dt><dd>This is a REQUIRED callback - must not be NULL </dd></dl>

</div>
</div>
<a id="a91e0e61d6e690cb434694399ee865976" name="a91e0e61d6e690cb434694399ee865976"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91e0e61d6e690cb434694399ee865976">&#9670;&#160;</a></span>alias_mapping_find_mapping_by_alias</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="can__types_8h.html#a6742a625d665303b409391926b8a65b1">alias_mapping_t</a> *(* alias_mapping_find_mapping_by_alias) (uint16_t alias)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback to find alias mapping by alias. </p>
<p>This required callback searches the alias mapping table for an entry matching the specified 12-bit alias. Used during conflict detection to determine if another node is using the same alias.</p>
<p>The callback should:</p><ul>
<li>Search the alias mapping table for matching alias</li>
<li>Return pointer to mapping entry if found</li>
<li>Return NULL if alias not found in table</li>
</ul>
<p>Typical implementation: AliasMappings_find_mapping_by_alias</p>
<dl class="section note"><dt>Note</dt><dd>This is a REQUIRED callback - must not be NULL </dd></dl>

</div>
</div>
<a id="a015cf925a8f563f2ff7ab585ac9b809d" name="a015cf925a8f563f2ff7ab585ac9b809d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a015cf925a8f563f2ff7ab585ac9b809d">&#9670;&#160;</a></span>on_alias_change</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* on_alias_change) (uint16_t alias, <a class="el" href="openlcb__types_8h.html#ab63b0eaf893badf557397c77fb74fe3c">node_id_t</a> node_id)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Optional callback for alias registration notification. </p>
<p>This optional callback provides application notification when an alias has been successfully registered (after AMD frame transmission). Applications can use this to track alias allocations, update displays, or perform logging.</p>
<p>The callback receives:</p><ul>
<li>alias: The 12-bit CAN alias that was registered</li>
<li>node_id: The 48-bit Node ID associated with the alias</li>
</ul>
<p>Common uses:</p><ul>
<li>Logging alias allocation events</li>
<li>Updating network monitoring displays</li>
<li>Tracking node login completion</li>
<li>Application-specific bookkeeping</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Optional - can be NULL if notification is not needed </dd></dl>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>src/drivers/canbus/<a class="el" href="can__login__message__handler_8h_source.html">can_login_message_handler.h</a></li>
</ul>
</div><!-- contents -->
<!doctype html>
<html>
    <body>
        <hr>
        <p style="margin-left: 10px; margin-right: 10px;">
            <b>Copyright (c)</b> 2026 Jim Kueneman all rights reserved. See the <a href="../licence.html">License</a>
        </p>
    </body>
</html>
